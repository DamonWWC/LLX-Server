# æ—é¾é¦™å¤§ç±³å•†åŸåç«¯æœåŠ¡éƒ¨ç½²è¯´æ˜æ–‡æ¡£

## ğŸ“‹ ç›®å½•

1. [ç³»ç»Ÿè¦æ±‚](#ç³»ç»Ÿè¦æ±‚)
2. [ç¯å¢ƒå‡†å¤‡](#ç¯å¢ƒå‡†å¤‡)
3. [å¿«é€Ÿéƒ¨ç½²](#å¿«é€Ÿéƒ¨ç½²)
4. [è¯¦ç»†éƒ¨ç½²æ­¥éª¤](#è¯¦ç»†éƒ¨ç½²æ­¥éª¤)
5. [é…ç½®è¯´æ˜](#é…ç½®è¯´æ˜)
6. [æœåŠ¡éªŒè¯](#æœåŠ¡éªŒè¯)
7. [æ•…éšœæ’é™¤](#æ•…éšœæ’é™¤)
8. [ç»´æŠ¤æŒ‡å—](#ç»´æŠ¤æŒ‡å—)

---

## ğŸ–¥ï¸ ç³»ç»Ÿè¦æ±‚

### ç¡¬ä»¶è¦æ±‚

| ç»„ä»¶ | æœ€ä½é…ç½® | æ¨èé…ç½® | ç”Ÿäº§ç¯å¢ƒ |
|------|----------|----------|----------|
| **CPU** | 2æ ¸å¿ƒ | 4æ ¸å¿ƒ | 8æ ¸å¿ƒ+ |
| **å†…å­˜** | 4GB | 8GB | 16GB+ |
| **å­˜å‚¨** | 20GB | 50GB | 100GB+ |
| **ç½‘ç»œ** | 100Mbps | 1Gbps | 10Gbps+ |

### è½¯ä»¶è¦æ±‚

#### å¿…éœ€è½¯ä»¶
- **æ“ä½œç³»ç»Ÿ**: Windows 10/11, Linux (Ubuntu 20.04+), macOS 10.15+
- **Docker**: 20.10.0+
- **Docker Compose**: 2.0.0+
- **Git**: 2.30.0+

#### æ¨èè½¯ä»¶
- **IDE**: Visual Studio Code, Visual Studio 2022
- **æ•°æ®åº“ç®¡ç†**: pgAdmin, DBeaver
- **Redisç®¡ç†**: RedisInsight
- **APIæµ‹è¯•**: Postman, Insomnia

---

## ğŸ”§ ç¯å¢ƒå‡†å¤‡

### 1. å®‰è£…Docker

#### Windows
```powershell
# ä¸‹è½½å¹¶å®‰è£…Docker Desktop
# è®¿é—®: https://www.docker.com/products/docker-desktop

# éªŒè¯å®‰è£…
docker --version
docker-compose --version
```

#### Linux (Ubuntu)
```bash
# æ›´æ–°åŒ…ç´¢å¼•
sudo apt-get update

# å®‰è£…Docker
sudo apt-get install -y docker.io docker-compose

# å¯åŠ¨DockeræœåŠ¡
sudo systemctl start docker
sudo systemctl enable docker

# å°†ç”¨æˆ·æ·»åŠ åˆ°dockerç»„
sudo usermod -aG docker $USER

# éªŒè¯å®‰è£…
docker --version
docker-compose --version
```

#### macOS
```bash
# ä½¿ç”¨Homebrewå®‰è£…
brew install --cask docker

# æˆ–è€…ä¸‹è½½Docker Desktop for Mac
# è®¿é—®: https://www.docker.com/products/docker-desktop

# éªŒè¯å®‰è£…
docker --version
docker-compose --version
```

### 2. å…‹éš†é¡¹ç›®

```bash
# å…‹éš†é¡¹ç›®åˆ°æœ¬åœ°
git clone <repository-url>
cd LLX.Server

# æˆ–è€…ä¸‹è½½ZIPæ–‡ä»¶å¹¶è§£å‹
```

### 3. æ£€æŸ¥é¡¹ç›®ç»“æ„

ç¡®ä¿é¡¹ç›®ç›®å½•ç»“æ„å¦‚ä¸‹ï¼š
```
LLX.Server/
â”œâ”€â”€ LLX.Server/           # ä¸»é¡¹ç›®ç›®å½•
â”‚   â”œâ”€â”€ Dockerfile        # Dockeré•œåƒæ„å»ºæ–‡ä»¶
â”‚   â”œâ”€â”€ scripts/          # éƒ¨ç½²å’Œæµ‹è¯•è„šæœ¬
â”‚   â””â”€â”€ ...
â”œâ”€â”€ doc/                  # æ–‡æ¡£ç›®å½•
â”‚   â”œâ”€â”€ docker-compose.yml # Dockerç¼–æ’æ–‡ä»¶
â”‚   â”œâ”€â”€ env.example       # ç¯å¢ƒå˜é‡ç¤ºä¾‹
â”‚   â””â”€â”€ ...
â””â”€â”€ README.md
```

---

## ğŸš€ å¿«é€Ÿéƒ¨ç½²

### ä¸€é”®éƒ¨ç½²ï¼ˆæ¨èï¼‰

#### Windows PowerShell
```powershell
# è¿›å…¥é¡¹ç›®ç›®å½•
cd LLX.Server

# è¿è¡Œéƒ¨ç½²è„šæœ¬
.\scripts\deploy.ps1

# æˆ–è€…æŒ‡å®šå‚æ•°
.\scripts\deploy.ps1 -Environment production -Build -Force
```

#### Linux/Mac
```bash
# è¿›å…¥é¡¹ç›®ç›®å½•
cd LLX.Server

# ç»™è„šæœ¬æ‰§è¡Œæƒé™
chmod +x scripts/deploy.sh

# è¿è¡Œéƒ¨ç½²è„šæœ¬
./scripts/deploy.sh

# æˆ–è€…æŒ‡å®šå‚æ•°
./scripts/deploy.sh -e production -b -f
```

### éƒ¨ç½²å‚æ•°è¯´æ˜

| å‚æ•° | è¯´æ˜ | é»˜è®¤å€¼ |
|------|------|--------|
| `-Environment` / `-e` | éƒ¨ç½²ç¯å¢ƒ (development/production) | production |
| `-Build` / `-b` | å¼ºåˆ¶é‡æ–°æ„å»ºé•œåƒ | false |
| `-Pull` / `-p` | æ‹‰å–æœ€æ–°é•œåƒ | false |
| `-Force` / `-f` | å¼ºåˆ¶é‡æ–°éƒ¨ç½² | false |
| `-Help` / `-h` | æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯ | false |

---

## ğŸ“ è¯¦ç»†éƒ¨ç½²æ­¥éª¤

### æ­¥éª¤1: é…ç½®ç¯å¢ƒå˜é‡

```bash
# å¤åˆ¶ç¯å¢ƒå˜é‡ç¤ºä¾‹æ–‡ä»¶
cp doc/env.example .env

# ç¼–è¾‘ç¯å¢ƒå˜é‡æ–‡ä»¶
nano .env  # Linux/Mac
notepad .env  # Windows
```

#### å…³é”®é…ç½®é¡¹

```bash
# æ•°æ®åº“é…ç½®
DB_PASSWORD=your_strong_password_here
DB_MIN_POOL_SIZE=5
DB_MAX_POOL_SIZE=100

# Redisé…ç½®
REDIS_PASSWORD=your_redis_password_here
REDIS_MAX_MEMORY=256

# åº”ç”¨é…ç½®
ASPNETCORE_ENVIRONMENT=Production
ASPNETCORE_URLS=http://+:8080

# æ€§èƒ½é…ç½®
PERFORMANCE_SLOW_REQUEST_THRESHOLD=1000
```

### æ­¥éª¤2: æ„å»ºå’Œå¯åŠ¨æœåŠ¡

```bash
# æ„å»ºé•œåƒ
docker-compose build

# å¯åŠ¨æ‰€æœ‰æœåŠ¡
docker-compose up -d

# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
docker-compose ps
```

### æ­¥éª¤3: ç­‰å¾…æœåŠ¡å¯åŠ¨

```bash
# æŸ¥çœ‹æœåŠ¡æ—¥å¿—
docker-compose logs -f

# æ£€æŸ¥æœåŠ¡å¥åº·çŠ¶æ€
curl http://localhost:8080/health
```

### æ­¥éª¤4: éªŒè¯éƒ¨ç½²

```bash
# è¿è¡ŒAPIæµ‹è¯•
.\scripts\test-api.ps1  # Windows
./scripts/test-api.sh   # Linux/Mac

# è¿è¡Œæ•°æ®åº“æµ‹è¯•
.\scripts\test-database.ps1  # Windows
./scripts/test-database.sh   # Linux/Mac

# è¿è¡Œç¼“å­˜æµ‹è¯•
.\scripts\test-cache.ps1  # Windows
./scripts/test-cache.sh   # Linux/Mac
```

---

## âš™ï¸ é…ç½®è¯´æ˜

### Docker Composeé…ç½®

#### æœåŠ¡é…ç½®
```yaml
services:
  # PostgreSQLæ•°æ®åº“
  postgres:
    image: postgres:16-alpine
    environment:
      POSTGRES_DB: llxrice
      POSTGRES_USER: llxrice_user
      POSTGRES_PASSWORD: ${DB_PASSWORD}
    ports:
      - "5432:5432"
    volumes:
      - postgres_data:/var/lib/postgresql/data

  # Redisç¼“å­˜
  redis:
    image: redis:7.2-alpine
    command: redis-server --requirepass ${REDIS_PASSWORD}
    ports:
      - "6379:6379"
    volumes:
      - redis_data:/data

  # APIæœåŠ¡
  api:
    build:
      context: .
      dockerfile: LLX.Server/Dockerfile
    environment:
      - ASPNETCORE_ENVIRONMENT=Production
      - ConnectionStrings__DefaultConnection=Host=postgres;Port=5432;Database=llxrice;Username=llxrice_user;Password=${DB_PASSWORD}
    ports:
      - "8080:8080"
    depends_on:
      postgres:
        condition: service_healthy
      redis:
        condition: service_healthy
```

#### èµ„æºé™åˆ¶
```yaml
deploy:
  resources:
    limits:
      memory: 512M
      cpus: "0.5"
    reservations:
      memory: 256M
      cpus: "0.25"
```

### ç¯å¢ƒå˜é‡é…ç½®

#### æ•°æ®åº“é…ç½®
```bash
# è¿æ¥å­—ç¬¦ä¸²
ConnectionStrings__DefaultConnection=Host=postgres;Port=5432;Database=llxrice;Username=llxrice_user;Password=${DB_PASSWORD};Pooling=true;Minimum Pool Size=5;Maximum Pool Size=100

# è¿æ¥æ± é…ç½®
Database__ConnectionPool__MinPoolSize=5
Database__ConnectionPool__MaxPoolSize=100
Database__ConnectionPool__ConnectionLifetime=300
Database__ConnectionPool__CommandTimeout=30
```

#### ç¼“å­˜é…ç½®
```bash
# Redisè¿æ¥
ConnectionStrings__Redis=redis:6379,password=${REDIS_PASSWORD},ssl=false,abortConnect=false

# ç¼“å­˜é…ç½®
REDIS_MAX_MEMORY=256
REDIS_MAX_MEMORY_POLICY=allkeys-lru
```

#### æ€§èƒ½é…ç½®
```bash
# æ€§èƒ½ç›‘æ§
Performance__SlowRequestThreshold=1000

# æ—¥å¿—é…ç½®
LOG_LEVEL=Information
LOG_MAX_FILE_SIZE=50
LOG_MAX_FILE_COUNT=5
```

---

## âœ… æœåŠ¡éªŒè¯

### 1. å¥åº·æ£€æŸ¥

```bash
# æ£€æŸ¥APIæœåŠ¡å¥åº·çŠ¶æ€
curl http://localhost:8080/health

# é¢„æœŸå“åº”
{
  "status": "Healthy",
  "timestamp": "2024-01-01T00:00:00Z",
  "services": {
    "database": "Healthy",
    "cache": "Healthy"
  }
}
```

### 2. APIç«¯ç‚¹æµ‹è¯•

```bash
# è·å–æ‰€æœ‰å•†å“
curl http://localhost:8080/api/products

# è·å–æ‰€æœ‰åœ°å€
curl http://localhost:8080/api/addresses

# è·å–è¿è´¹é…ç½®
curl http://localhost:8080/api/shipping/rates
```

### 3. Swaggeræ–‡æ¡£

è®¿é—® http://localhost:8080/swagger æŸ¥çœ‹APIæ–‡æ¡£

### 4. æ•°æ®åº“è¿æ¥æµ‹è¯•

```bash
# è¿æ¥åˆ°PostgreSQL
docker exec -it llxrice_db psql -U llxrice_user -d llxrice

# æŸ¥çœ‹è¡¨ç»“æ„
\dt

# æŸ¥çœ‹æ•°æ®
SELECT COUNT(*) FROM Products;
SELECT COUNT(*) FROM Addresses;
SELECT COUNT(*) FROM Orders;
```

### 5. Redisè¿æ¥æµ‹è¯•

```bash
# è¿æ¥åˆ°Redis
docker exec -it llxrice_redis redis-cli

# æµ‹è¯•è¿æ¥
ping

# æŸ¥çœ‹é”®
keys *

# æµ‹è¯•ç¼“å­˜
set test_key "test_value"
get test_key
```

---

## ğŸ” æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ

#### 1. æœåŠ¡å¯åŠ¨å¤±è´¥

**é—®é¢˜**: å®¹å™¨å¯åŠ¨å¤±è´¥
```bash
# æŸ¥çœ‹å®¹å™¨æ—¥å¿—
docker-compose logs api

# æŸ¥çœ‹å®¹å™¨çŠ¶æ€
docker-compose ps

# é‡å¯æœåŠ¡
docker-compose restart api
```

**è§£å†³æ–¹æ¡ˆ**:
- æ£€æŸ¥ç¯å¢ƒå˜é‡é…ç½®
- æ£€æŸ¥ç«¯å£å ç”¨
- æ£€æŸ¥DockeræœåŠ¡çŠ¶æ€

#### 2. æ•°æ®åº“è¿æ¥å¤±è´¥

**é—®é¢˜**: æ— æ³•è¿æ¥åˆ°æ•°æ®åº“
```bash
# æ£€æŸ¥æ•°æ®åº“å®¹å™¨çŠ¶æ€
docker-compose logs postgres

# æ£€æŸ¥ç½‘ç»œè¿æ¥
docker network ls
docker network inspect llxrice_llxrice_network
```

**è§£å†³æ–¹æ¡ˆ**:
- æ£€æŸ¥æ•°æ®åº“å¯†ç é…ç½®
- æ£€æŸ¥ç½‘ç»œé…ç½®
- é‡å¯æ•°æ®åº“æœåŠ¡

#### 3. Redisè¿æ¥å¤±è´¥

**é—®é¢˜**: æ— æ³•è¿æ¥åˆ°Redis
```bash
# æ£€æŸ¥Rediså®¹å™¨çŠ¶æ€
docker-compose logs redis

# æµ‹è¯•Redisè¿æ¥
docker exec -it llxrice_redis redis-cli ping
```

**è§£å†³æ–¹æ¡ˆ**:
- æ£€æŸ¥Rediså¯†ç é…ç½®
- æ£€æŸ¥Rediså†…å­˜é…ç½®
- é‡å¯RedisæœåŠ¡

#### 4. ç«¯å£å ç”¨é—®é¢˜

**é—®é¢˜**: ç«¯å£å·²è¢«å ç”¨
```bash
# æŸ¥çœ‹ç«¯å£å ç”¨
netstat -tulpn | grep :8080  # Linux
netstat -ano | findstr :8080  # Windows

# åœæ­¢å ç”¨ç«¯å£çš„è¿›ç¨‹
sudo kill -9 <PID>  # Linux
taskkill /PID <PID> /F  # Windows
```

#### 5. å†…å­˜ä¸è¶³

**é—®é¢˜**: å®¹å™¨å†…å­˜ä¸è¶³
```bash
# æŸ¥çœ‹å®¹å™¨èµ„æºä½¿ç”¨
docker stats

# è°ƒæ•´å†…å­˜é™åˆ¶
# ç¼–è¾‘docker-compose.yml
deploy:
  resources:
    limits:
      memory: 1G  # å¢åŠ å†…å­˜é™åˆ¶
```

### æ—¥å¿—æŸ¥çœ‹

#### æŸ¥çœ‹æ‰€æœ‰æœåŠ¡æ—¥å¿—
```bash
docker-compose logs -f
```

#### æŸ¥çœ‹ç‰¹å®šæœåŠ¡æ—¥å¿—
```bash
docker-compose logs -f api
docker-compose logs -f postgres
docker-compose logs -f redis
```

#### æŸ¥çœ‹åº”ç”¨æ—¥å¿—æ–‡ä»¶
```bash
# æŸ¥çœ‹æ—¥å¿—ç›®å½•
ls -la logs/

# æŸ¥çœ‹æœ€æ–°æ—¥å¿—
tail -f logs/app-*.log
```

---

## ğŸ”§ ç»´æŠ¤æŒ‡å—

### æ—¥å¸¸ç»´æŠ¤

#### 1. æœåŠ¡çŠ¶æ€æ£€æŸ¥
```bash
# æ£€æŸ¥æœåŠ¡çŠ¶æ€
docker-compose ps

# æ£€æŸ¥èµ„æºä½¿ç”¨
docker stats

# æ£€æŸ¥ç£ç›˜ä½¿ç”¨
df -h
```

#### 2. æ—¥å¿—æ¸…ç†
```bash
# æ¸…ç†Dockeræ—¥å¿—
docker system prune -f

# æ¸…ç†åº”ç”¨æ—¥å¿—
find logs/ -name "*.log" -mtime +7 -delete
```

#### 3. æ•°æ®å¤‡ä»½
```bash
# å¤‡ä»½æ•°æ®åº“
docker exec llxrice_db pg_dump -U llxrice_user llxrice > backup_$(date +%Y%m%d).sql

# å¤‡ä»½Redisæ•°æ®
docker exec llxrice_redis redis-cli --rdb /data/backup_$(date +%Y%m%d).rdb
```

### æ›´æ–°éƒ¨ç½²

#### 1. æ›´æ–°ä»£ç 
```bash
# æ‹‰å–æœ€æ–°ä»£ç 
git pull origin main

# é‡æ–°æ„å»ºé•œåƒ
docker-compose build --no-cache

# é‡å¯æœåŠ¡
docker-compose up -d
```

#### 2. æ•°æ®åº“è¿ç§»
```bash
# è¿è¡Œæ•°æ®åº“è¿ç§»
docker-compose exec api dotnet ef database update
```

#### 3. é…ç½®æ›´æ–°
```bash
# æ›´æ–°ç¯å¢ƒå˜é‡
nano .env

# é‡å¯æœåŠ¡
docker-compose restart
```

### ç›‘æ§å’Œå‘Šè­¦

#### 1. å¥åº·æ£€æŸ¥ç›‘æ§
```bash
# è®¾ç½®å®šæ—¶å¥åº·æ£€æŸ¥
crontab -e

# æ·»åŠ ä»¥ä¸‹è¡Œï¼ˆæ¯5åˆ†é’Ÿæ£€æŸ¥ä¸€æ¬¡ï¼‰
*/5 * * * * curl -f http://localhost:8080/health || echo "Service down" | mail -s "Service Alert" admin@example.com
```

#### 2. æ€§èƒ½ç›‘æ§
```bash
# è¿è¡Œæ€§èƒ½æµ‹è¯•
.\scripts\test-performance.ps1 -ConcurrentUsers 10 -TestDuration 60

# æŸ¥çœ‹æ€§èƒ½æŠ¥å‘Š
cat performance_report.json
```

#### 3. æ—¥å¿—ç›‘æ§
```bash
# ç›‘æ§é”™è¯¯æ—¥å¿—
tail -f logs/app-*.log | grep ERROR

# ç›‘æ§æ…¢è¯·æ±‚
tail -f logs/app-*.log | grep "Slow request"
```

---

## ğŸ“ æŠ€æœ¯æ”¯æŒ

### è”ç³»æ–¹å¼
- **æŠ€æœ¯æ”¯æŒ**: support@llxrice.com
- **æ–‡æ¡£æ›´æ–°**: docs@llxrice.com
- **ç´§æ€¥è”ç³»**: emergency@llxrice.com

### ç›¸å…³æ–‡æ¡£
- [APIæ–‡æ¡£](http://localhost:8080/swagger)
- [å¼€å‘æŒ‡å—](doc/åç«¯æœåŠ¡å¼€å‘è®¡åˆ’.md)
- [æŠ€æœ¯æ–¹æ¡ˆ](doc/åç«¯æœåŠ¡è®¾è®¡æ–¹æ¡ˆ.md)
- [ç¬¬å››é˜¶æ®µæ€»ç»“](ç¬¬å››é˜¶æ®µå®Œæˆæ€»ç»“.md)

### ç‰ˆæœ¬ä¿¡æ¯
- **å½“å‰ç‰ˆæœ¬**: v1.0.0
- **æœ€åæ›´æ–°**: 2024-01-01
- **å…¼å®¹æ€§**: .NET 8, PostgreSQL 16, Redis 7.2

---

## ğŸ¯ æ€»ç»“

æœ¬éƒ¨ç½²è¯´æ˜æ–‡æ¡£æä¾›äº†å®Œæ•´çš„éƒ¨ç½²æµç¨‹ï¼ŒåŒ…æ‹¬ï¼š

1. âœ… **ç³»ç»Ÿè¦æ±‚** - ç¡¬ä»¶å’Œè½¯ä»¶è¦æ±‚
2. âœ… **ç¯å¢ƒå‡†å¤‡** - Dockerå®‰è£…å’Œé¡¹ç›®å‡†å¤‡
3. âœ… **å¿«é€Ÿéƒ¨ç½²** - ä¸€é”®éƒ¨ç½²è„šæœ¬ä½¿ç”¨
4. âœ… **è¯¦ç»†æ­¥éª¤** - æ‰‹åŠ¨éƒ¨ç½²æµç¨‹
5. âœ… **é…ç½®è¯´æ˜** - è¯¦ç»†çš„é…ç½®å‚æ•°
6. âœ… **æœåŠ¡éªŒè¯** - éƒ¨ç½²åçš„éªŒè¯æ­¥éª¤
7. âœ… **æ•…éšœæ’é™¤** - å¸¸è§é—®é¢˜è§£å†³æ–¹æ¡ˆ
8. âœ… **ç»´æŠ¤æŒ‡å—** - æ—¥å¸¸ç»´æŠ¤å’Œæ›´æ–°

æŒ‰ç…§æœ¬æ–‡æ¡£çš„æ­¥éª¤ï¼Œæ‚¨å¯ä»¥æˆåŠŸéƒ¨ç½²æ—é¾é¦™å¤§ç±³å•†åŸåç«¯æœåŠ¡åˆ°ç”Ÿäº§ç¯å¢ƒã€‚å¦‚æœ‰ä»»ä½•é—®é¢˜ï¼Œè¯·å‚è€ƒæ•…éšœæ’é™¤éƒ¨åˆ†æˆ–è”ç³»æŠ€æœ¯æ”¯æŒã€‚
